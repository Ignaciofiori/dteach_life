<%- include("../partials/head.ejs") %>
<%- include("../partials/header.ejs") %>
<main>
<section class="containerForm">
    <h1>Editar Usuario</h1>
   
    <form action= "/users/edit/<%= usuario.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
        <label for="nombre">Nombre:</label>
        <input type="text" name="nombre"  value="<%= usuario.nombre%>">
        <% if (locals.errors && errors.nombre ) { %>
            <div class="errors">
                <%= errors.nombre.msg %> 
            </div>
            <% } %>

        <label for="apellido">Apellido:</label>
        <input type="text" name="apellido" id="apellido" value="<%= usuario.apellido %>">
        <% if (locals.errors && errors.apellido ) { %>
            <div class="errors">
                <%= errors.apellido.msg%> 
            </div>
        <% } %>

        <label for="ubicacion">Ubicacion:</label>
        <input type="text" name="ubicacion" id="ubicacion" value="<%= usuario.ubicacion%>">
        <% if (locals.errors && errors.ubicacion ) { %>
            <div class="errors">
                <%= errors.ubicacion.msg %> 
            </div>
        <% } %>

        <label for="descripcion">Descripcion:</label>
        <input type ="text" name="descripcion" id="descripcion" cols="30" rows="5" value="<%= usuario.descripcion %>">
        <% if (locals.errors && errors.descripcion ) { %>
            <div class="errors">
                <%= errors.descripcion.msg %> 
            </div>
        <% } %>

        <label for="imagen">Imagen del Usuario:</label>
        <input type="file"  name="imagen" alt="Submit" width="48" height="48" value="<%= locals.old && old.imagen ? old.imagen : null %> " required>
        <% if (locals.errors && errors.imagen) { %>
            <div class="errors">
                <%= errors.imagen.msg %> 
            </div>
        <% } %>

        <label for="email">Correo:</label>
        <input type="email" name="email" id="email" value="<%= usuario.email %>">
        <% if (locals.errors && errors.email ) { %>
            <div class="errors">
                <%= errors.email.msg%> 
            </div>
        <% } %>

        <label for="categoria">Categoria:</label>

           <select name="categoria">
            <% categorias.forEach(element => { %>
                 
            <option value="<%= element.id%>" <%=(element.id == usuario.id_categoria) ? "selected" : null%> >
                <%=element.nombre %>
            </option>
            <% }) %>
           </select>

        <label for="password">Contraseña:</label>
        <input type="password" name="password" id="password" >
        <% if (locals.errors && errors.password ) { %>
            <div class="errors">
                <%= errors.password.msg %> 
            </div>
        <% } %>

        <button type="submit">Enviar</button>
    </form>
    <form action="/users/delete/<%= usuario.id %>?_method=DELETE" method="POST">
        <p>¿Queres borrar esta clase ?</p>
        <button class="delete" type="submit">Borrar</button>
    </form>
</section>
</main>
<%- include("../partials/footer.ejs") %>