<%- include("../partials/head.ejs") %>
<%- include("../partials/header.ejs") %>
<main>
<section class="containerForm">
    <h1>Editar Usuario</h1>
   
    <form action= "/users/edit/<%= usuario.id %>?_method=PUT" method="POST" enctype="multipart/form-data" id="formularioEdit">
        <label for="nombre">Nombre:</label>
        <input type="text" name="nombre" id="campoNombre" value="<%= usuario.nombre%>">
        <% if (locals.errors && errors.nombre ) { %>
            <div class="errors">
                <%= errors.nombre.msg %> 
            </div>
            <% } %>
            <div class="errors nombre">
                <ul></ul>
            </div>

        <label for="apellido">Apellido:</label>
        <input type="text" name="apellido" id="campoApellido" value="<%= usuario.apellido %>">
        <% if (locals.errors && errors.apellido ) { %>
            <div class="errors">
                <%= errors.apellido.msg%> 
            </div>
        <% } %>
        <div class="errors apellido">
            <ul></ul>
        </div>


        <label for="ubicacion">Ubicacion:</label>
        <input type="text" name="ubicacion" id="campoUbicacion" value="<%= usuario.ubicacion%>">
        <% if (locals.errors && errors.ubicacion ) { %>
            <div class="errors">
                <%= errors.ubicacion.msg %> 
            </div>
        <% } %>
        <div class="errors ubicacion">
            <ul></ul>
        </div>


        <label for="descripcion">Descripcion:</label>
        <input type ="text" name="descripcion" id="campoDescripcion" cols="30" rows="5" value="<%= usuario.descripcion %>">
        <% if (locals.errors && errors.descripcion ) { %>
            <div class="errors">
                <%= errors.descripcion.msg %> 
            </div>
        <% } %>
        <div class="errors descripcionError">
            <ul></ul>
        </div>


        <label for="imagen">Imagen del Usuario:</label>
        <input type="file"  name="imagen" id="campoImagen" alt="Submit" width="48" height="48" >
        <% if (locals.errors && errors.imagen) { %>
            <div class="errors">
                <%= errors.imagen.msg %> 
            </div>
        <% } %>
        <div class="errors imagen">
            <ul></ul>
        </div>

        <label for="email">Correo:</label>
        <input type="email" name="email" id="campoEmail" value="<%= usuario.email %>">
        <% if (locals.errors && errors.email ) { %>
            <div class="errors">
                <%= errors.email.msg%> 
            </div>
        <% } %>
        <div class="errors email">
            <ul></ul>
        </div>

        <label for="categoria">Categoria:</label>

           <select name="categoria">
            <% for( let i =0;i <categorias.length;i++ ) { %>
                     
                <option value="<%= categorias[i].id%>" <%= categorias[i].id == usuario.id_categoria ? "selected" : null  %> >
                    <%=categorias[i].nombre %>
                </option>
                <% } %> 
           </select>

        <label for="password">Contraseña:</label>
        <input type="password" name="password" id="campoPassword" >
        <% if (locals.errors && errors.password ) { %>
            <div class="errors">
                <%= errors.password.msg %> 
            </div>
        <% } %><div class="errors password">
            <ul></ul>
        </div>
        
        <label for="password">Repetir Contraseña:</label>
        <input type="password" name="password2" id="campoPassword2" >

        <button class="botonEnviar "type="submit">Enviar</button>
    </form>
    <form action="/users/delete/<%= usuario.id %>?_method=DELETE" method="POST">
        <p>¿Queres borrar esta clase ?</p>
        <button class="delete" type="submit">Borrar</button>
    </form>
</section>
<script src="/js/usersEdit.js"></script>
</main>
<%- include("../partials/footer.ejs") %>